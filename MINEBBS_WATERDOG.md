# YRDatabase-Waterdog - WaterdogPE æ•°æ®åº“å‰ç½®æ’ä»¶

> ğŸŒ WaterdogPE è·¨æœæ•°æ®åŒæ­¥è§£å†³æ–¹æ¡ˆï¼Œé…åˆ YRDatabase-Nukkit å®ç°çœŸæ­£çš„è·¨æœæ•°æ®ç®¡ç†

---

## ğŸ“– æ’ä»¶ç®€ä»‹

YRDatabase-Waterdog æ˜¯ä¸“ä¸º WaterdogPE ä»£ç†æœåŠ¡å™¨è®¾è®¡çš„æ•°æ®åº“ç®¡ç†æ’ä»¶ï¼Œé€šè¿‡ Redis Pub/Sub å®ç°è·¨æœé€šä¿¡ï¼Œè®©å­æœæ’ä»¶èƒ½å¤ŸåŒºåˆ†ç©å®¶çš„"çœŸå®åŠ å…¥/é€€å‡º"å’Œ"æœåŠ¡å™¨è½¬æœ"ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ğŸ”” **å®æ—¶é€šçŸ¥** - é€šè¿‡ Redis Pub/Sub å‘æ‰€æœ‰å­æœå‘é€ç©å®¶çœŸå®ä¸Šçº¿/ä¸‹çº¿æ¶ˆæ¯
- ğŸ¯ **æ™ºèƒ½è¯†åˆ«** - åŒºåˆ†ç©å®¶è½¬æœå’ŒçœŸå®é€€å‡ºï¼Œé¿å…é¢‘ç¹æŒä¹…åŒ–
- âš¡ **é«˜æ€§èƒ½** - åŸºäº Redis çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä½å»¶è¿Ÿé€šä¿¡
- ğŸ“¡ **å¿ƒè·³ç›‘æµ‹** - å®šæ—¶å‘é€åœ¨çº¿äººæ•°å’Œä¼šè¯æ•°æ®
- ğŸ”Œ **å³æ’å³ç”¨** - é…åˆ YRDatabase-Nukkit æ— éœ€é¢å¤–å¼€å‘

---

## ğŸ® ä½¿ç”¨åœºæ™¯

### é—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ’ä»¶ï¼Ÿ

åœ¨å¤šæœç¯å¢ƒä¸‹ï¼Œç©å®¶é¢‘ç¹è½¬æœä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š

1. **æ•°æ®é¢‘ç¹æŒä¹…åŒ–** - æ¯æ¬¡è½¬æœéƒ½è§¦å‘ä¿å­˜ï¼Œæµªè´¹æ€§èƒ½
2. **è½¬æœå¡é¡¿** - æ•°æ®åº“å†™å…¥å¯¼è‡´ç©å®¶è½¬æœå»¶è¿Ÿ
3. **æ•°æ®ä¸ä¸€è‡´** - å¤šæœåŒæ—¶å†™å…¥å¯èƒ½å¯¼è‡´æ•°æ®å†²çª

### è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨ YRDatabase-Waterdog + YRDatabase-Nukkitï¼š

```
ç©å®¶çœŸå®ç™»å½• â†’ WaterdogPE å‘é€ REAL_JOIN
                â†“
         æ‰€æœ‰å­æœæ”¶åˆ°é€šçŸ¥ â†’ æ ‡è®°ç©å®¶ä¸º"çœŸå®åœ¨çº¿"
                â†“
     ç©å®¶åœ¨å­æœé—´è½¬æœ â†’ ä¸è§¦å‘æŒä¹…åŒ–ï¼Œåªæ›´æ–°ç¼“å­˜
                â†“
  ç©å®¶çœŸå®é€€å‡º â†’ WaterdogPE å‘é€ REAL_QUIT
                â†“
         å½“å‰å­æœæ”¶åˆ°é€šçŸ¥ â†’ æ‰§è¡Œæ•°æ®æŒä¹…åŒ–
```

---

## ğŸ“¥ ä¸‹è½½å®‰è£…

### ä¸‹è½½åœ°å€

**GitHub Releases**ï¼š[YRDatabase Releases](https://github.com/MufHead/YRDatabase/releases)

**Jenkins CI æ„å»º**ï¼š[æœ€æ–°æ„å»º](https://motci.cn/job/YRDatabase/)

### å®‰è£…æ­¥éª¤

1. ä¸‹è½½ `YRDatabase-Waterdog.jar`
2. æ”¾å…¥ WaterdogPE æœåŠ¡å™¨ `plugins/` ç›®å½•
3. å¯åŠ¨ WaterdogPEï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶
4. ç¼–è¾‘ `plugins/YRDatabase-Waterdog/config.yml` é…ç½® Redis
5. é‡å¯ WaterdogPE

---

## âš™ï¸ é…ç½®æ–‡ä»¶

```yaml
# YRDatabase-Waterdog é…ç½®æ–‡ä»¶

# Redis é…ç½®
redis:
  enabled: true
  host: localhost
  port: 6379
  password: ""
  database: 0
  timeout: 3000

# Redis Pub/Sub é…ç½®
pubsub:
  enabled: true
  # Pub/Sub é¢‘é“é…ç½®
  channels:
    player-join: "yrdatabase:player:join"
    player-quit: "yrdatabase:player:quit"
    heartbeat: "yrdatabase:heartbeat"
  # å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰
  heartbeat-interval: 30

# ç½‘æ˜“ UID è®°å½•åŠŸèƒ½
netease-uid:
  enabled: true
```

---

## ğŸ”§ å·¥ä½œåŸç†

### 1. ç©å®¶çœŸå®åŠ å…¥æµç¨‹

```
1. ç©å®¶è¿æ¥åˆ° WaterdogPE
   â†“
2. WaterdogPE è§¦å‘ PlayerJoinEvent
   â†“
3. YRDatabase-Waterdog è®°å½•ç©å®¶ä¼šè¯
   â†“
4. å‘é€ REAL_JOIN æ¶ˆæ¯åˆ° Redis
   {
     "uid": "123456789",
     "username": "Steve",
     "timestamp": 1234567890
   }
   â†“
5. æ‰€æœ‰ Nukkit å­æœæ”¶åˆ°æ¶ˆæ¯
   â†“
6. å­æœæ ‡è®°ç©å®¶ä¸º"çœŸå®åœ¨çº¿"
   â†“
7. ç©å®¶åŠ å…¥æŸä¸ªå­æœæ—¶è§¦å‘ PlayerDataInitializeEvent(REAL_JOIN)
```

### 2. ç©å®¶è½¬æœæµç¨‹

```
1. ç©å®¶ä»å­æœAè½¬åˆ°å­æœB
   â†“
2. å­æœAè§¦å‘ PlayerQuitEvent
   â†“
3. YRDatabase-Nukkit æ£€æŸ¥ Redisï¼šç©å®¶ä»åœ¨ WaterdogPE ä¼šè¯ä¸­
   â†“
4. è§¦å‘ PlayerDataPersistEvent(SERVER_TRANSFER)
   â†“
5. æ’ä»¶åªä¿å­˜åˆ° Redis ç¼“å­˜ï¼Œä¸å†™å…¥æ•°æ®åº“
   â†“
6. å­æœBè§¦å‘ PlayerJoinEvent
   â†“
7. è§¦å‘ PlayerDataInitializeEvent(SERVER_TRANSFER)
   â†“
8. æ’ä»¶ä» Redis å¿«é€ŸåŠ è½½æ•°æ®
```

### 3. ç©å®¶çœŸå®é€€å‡ºæµç¨‹

```
1. ç©å®¶æ–­å¼€ WaterdogPE è¿æ¥
   â†“
2. WaterdogPE è§¦å‘ PlayerDisconnectEvent
   â†“
3. YRDatabase-Waterdog ç§»é™¤ç©å®¶ä¼šè¯
   â†“
4. å‘é€ REAL_QUIT æ¶ˆæ¯åˆ° Redis
   {
     "uid": "123456789",
     "username": "Steve",
     "lastServer": "lobby"
   }
   â†“
5. æ‰€æœ‰ Nukkit å­æœæ”¶åˆ°æ¶ˆæ¯
   â†“
6. ç©å®¶æ‰€åœ¨çš„å­æœè§¦å‘ PlayerDataPersistEvent(REAL_QUIT)
   â†“
7. æ’ä»¶æ‰§è¡Œæ•°æ®æŒä¹…åŒ–åˆ°æ•°æ®åº“
```

---

## ğŸ“¡ Redis Pub/Sub é¢‘é“

### 1. yrdatabase:player:join

**ç©å®¶çœŸå®åŠ å…¥é¢‘é“**

å‘é€æ—¶æœºï¼šç©å®¶è¿æ¥åˆ° WaterdogPE

æ¶ˆæ¯æ ¼å¼ï¼š
```json
{
  "uid": "123456789",        // ç©å®¶UIDï¼ˆç½‘æ˜“UIDæˆ–UUIDï¼‰
  "username": "Steve",       // ç©å®¶åç§°
  "timestamp": 1234567890    // åŠ å…¥æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}
```

### 2. yrdatabase:player:quit

**ç©å®¶çœŸå®é€€å‡ºé¢‘é“**

å‘é€æ—¶æœºï¼šç©å®¶æ–­å¼€ WaterdogPE è¿æ¥

æ¶ˆæ¯æ ¼å¼ï¼š
```json
{
  "uid": "123456789",        // ç©å®¶UID
  "username": "Steve",       // ç©å®¶åç§°
  "lastServer": "lobby",     // æœ€åæ‰€åœ¨æœåŠ¡å™¨
  "timestamp": 1234567890    // é€€å‡ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
}
```

### 3. yrdatabase:heartbeat

**å¿ƒè·³é¢‘é“**

å‘é€æ—¶æœºï¼šæ¯ 30 ç§’ï¼ˆå¯é…ç½®ï¼‰

æ¶ˆæ¯æ ¼å¼ï¼š
```json
{
  "timestamp": 1234567890,   // å½“å‰æ—¶é—´æˆ³
  "online": 100,             // å½“å‰åœ¨çº¿äººæ•°
  "sessions": 100            // å½“å‰ä¼šè¯æ•°
}
```

---

## ğŸŒ å®Œæ•´å¤šæœé…ç½®ç¤ºä¾‹

### ç½‘ç»œæ‹“æ‰‘

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  WaterdogPE     â”‚
                    â”‚  (ä»£ç†æœåŠ¡å™¨)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Lobby   â”‚          â”‚ Survivalâ”‚         â”‚ Creativeâ”‚
   â”‚ (å­æœ1) â”‚          â”‚ (å­æœ2) â”‚         â”‚ (å­æœ3) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Redis Server   â”‚
                    â”‚  MySQL Server   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. WaterdogPE é…ç½®

**å®‰è£…æ’ä»¶**ï¼š
- `YRDatabase-Waterdog.jar`

**é…ç½®æ–‡ä»¶** (`plugins/YRDatabase-Waterdog/config.yml`)ï¼š
```yaml
redis:
  enabled: true
  host: 192.168.1.100  # Redis æœåŠ¡å™¨åœ°å€
  port: 6379
  password: ""
  database: 0

pubsub:
  enabled: true
  heartbeat-interval: 30

netease-uid:
  enabled: true
```

### 2. Lobby å­æœé…ç½®

**å®‰è£…æ’ä»¶**ï¼š
- `YRDatabase.jar`

**é…ç½®æ–‡ä»¶** (`plugins/YRDatabase/config.yml`)ï¼š
```yaml
mysql:
  enabled: true
  host: 192.168.1.100
  port: 3306
  database: minecraft
  username: root
  password: your_password

redis:
  enabled: true
  host: 192.168.1.100
  port: 6379
  password: ""
  database: 0

pubsub:
  enabled: true  # å¯ç”¨ Pub/Sub ç›‘å¬
```

### 3. Survival å’Œ Creative å­æœé…ç½®

**é…ç½®ç›¸åŒ**ï¼šä¸ Lobby å­æœé…ç½®ä¸€è‡´

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### ä¸ä½¿ç”¨ YRDatabase-Waterdog

```
ç©å®¶æ“ä½œ              æ•°æ®åº“æ“ä½œ            æ€§èƒ½å½±å“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç™»å½• WaterdogPE      æ—                     -
è¿›å…¥ Lobby           è¯»å–æ•°æ®åº“ (100ms)    å¡é¡¿
Lobby â†’ Survival     å†™å…¥æ•°æ®åº“ (50ms)     å¡é¡¿
                     è¯»å–æ•°æ®åº“ (100ms)    å¡é¡¿
Survival â†’ Creative  å†™å…¥æ•°æ®åº“ (50ms)     å¡é¡¿
                     è¯»å–æ•°æ®åº“ (100ms)    å¡é¡¿
é€€å‡ºæœåŠ¡å™¨           å†™å…¥æ•°æ®åº“ (50ms)     å¡é¡¿

æ€»è®¡ï¼š4æ¬¡å†™å…¥ + 3æ¬¡è¯»å– = 550ms å»¶è¿Ÿ
```

### ä½¿ç”¨ YRDatabase-Waterdog

```
ç©å®¶æ“ä½œ              æ•°æ®åº“æ“ä½œ            æ€§èƒ½å½±å“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç™»å½• WaterdogPE      è¯»å–æ•°æ®åº“ (100ms)    é¦–æ¬¡å¡é¡¿
è¿›å…¥ Lobby           è¯»å– Redis (5ms)      æµç•…
Lobby â†’ Survival     å†™å…¥ Redis (5ms)      æµç•…
                     è¯»å– Redis (5ms)      æµç•…
Survival â†’ Creative  å†™å…¥ Redis (5ms)      æµç•…
                     è¯»å– Redis (5ms)      æµç•…
é€€å‡ºæœåŠ¡å™¨           å†™å…¥æ•°æ®åº“ (50ms)     å¯æ¥å—
                     å†™å…¥ Redis (5ms)      æµç•…

æ€»è®¡ï¼š1æ¬¡æ•°æ®åº“è¯» + 1æ¬¡æ•°æ®åº“å†™ + 6æ¬¡Redis = 180ms å»¶è¿Ÿ
```

**æ€§èƒ½æå‡**ï¼š`550ms â†’ 180ms`ï¼Œå»¶è¿Ÿå‡å°‘ **67%** âœ…

---

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹ Redis Pub/Sub æ¶ˆæ¯

ä½¿ç”¨ Redis CLI ç›‘æ§æ¶ˆæ¯ï¼š

```bash
# è¿æ¥åˆ° Redis
redis-cli

# è®¢é˜…æ‰€æœ‰ YRDatabase é¢‘é“
PSUBSCRIBE yrdatabase:*

# æˆ–è®¢é˜…ç‰¹å®šé¢‘é“
SUBSCRIBE yrdatabase:player:join
SUBSCRIBE yrdatabase:player:quit
SUBSCRIBE yrdatabase:heartbeat
```

### æŸ¥çœ‹ WaterdogPE æ—¥å¿—

```
[YRDatabase-Waterdog] ç©å®¶ Steve (UID: 123456789) åŠ å…¥ä»£ç†
[YRDatabase-Waterdog] å‘é€ REAL_JOIN: Steve â†’ yrdatabase:player:join
[YRDatabase-Waterdog] ç©å®¶ Steve åˆ‡æ¢åˆ°æœåŠ¡å™¨: survival
[YRDatabase-Waterdog] ç©å®¶ Steve æ–­å¼€è¿æ¥ï¼ˆæœ€åæ‰€åœ¨: survivalï¼‰
[YRDatabase-Waterdog] å‘é€ REAL_QUIT: Steve â†’ yrdatabase:player:quit
```

### æŸ¥çœ‹å­æœæ—¥å¿—

```
[YRDatabase] Redis Pub/Sub è®¢é˜…æˆåŠŸ
[YRDatabase] ç›‘å¬é¢‘é“: yrdatabase:player:join, yrdatabase:player:quit
[YRDatabase] æ”¶åˆ°REAL_JOIN: Steve (UID: 123456789)
[YRDatabase] å½“å‰çœŸå®åœ¨çº¿ç©å®¶æ•°: 10
[YRDatabase] æ”¶åˆ°REAL_QUIT: Steve (UID: 123456789, æœ€åæ‰€åœ¨: survival)
[YRDatabase] å½“å‰çœŸå®åœ¨çº¿ç©å®¶æ•°: 9
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¿…é¡»å®‰è£… Redis å—ï¼Ÿ

**A:** æ˜¯çš„ã€‚YRDatabase-Waterdog ä¾èµ– Redis Pub/Sub å®ç°è·¨æœé€šä¿¡ã€‚

### Q: å¯ä»¥åªåœ¨ WaterdogPE å®‰è£…è¿™ä¸ªæ’ä»¶å—ï¼Ÿ

**A:** ä¸å¯ä»¥ã€‚å¿…é¡»åŒæ—¶åœ¨ WaterdogPE å’Œæ‰€æœ‰ Nukkit å­æœå®‰è£…å¯¹åº”çš„æ’ä»¶ï¼š
- WaterdogPE: `YRDatabase-Waterdog.jar`
- Nukkit å­æœ: `YRDatabase.jar`ï¼ˆå¹¶å¯ç”¨ `pubsub.enabled: true`ï¼‰

### Q: å¦‚æœæŸä¸ªå­æœæ²¡æœ‰å®‰è£… YRDatabase ä¼šæ€æ ·ï¼Ÿ

**A:** è¯¥å­æœæ— æ³•æ”¶åˆ° REAL_JOIN/REAL_QUIT æ¶ˆæ¯ï¼Œä¼šæŒ‰ç…§å•æœæ¨¡å¼è¿è¡Œï¼ˆä½¿ç”¨ LOCAL_JOIN/LOCAL_QUITï¼‰ã€‚

### Q: Redis è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ï¼š
1. Redis æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼š`redis-cli ping`
2. WaterdogPE èƒ½å¦è®¿é—® Redis æœåŠ¡å™¨ï¼ˆé˜²ç«å¢™ã€ç½‘ç»œï¼‰
3. é…ç½®æ–‡ä»¶ä¸­çš„åœ°å€ã€ç«¯å£ã€å¯†ç æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹ WaterdogPE æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•æµ‹è¯•æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼Ÿ

**A:**
1. å¯åŠ¨ WaterdogPE å’Œä¸€ä¸ªå­æœ
2. ç©å®¶ç™»å½•åæŸ¥çœ‹æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   - WaterdogPE å‘é€ `REAL_JOIN` æ¶ˆæ¯
   - å­æœæ”¶åˆ° `REAL_JOIN` æ¶ˆæ¯
3. ç©å®¶é€€å‡ºåæŸ¥çœ‹æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   - WaterdogPE å‘é€ `REAL_QUIT` æ¶ˆæ¯
   - å­æœæ”¶åˆ° `REAL_QUIT` æ¶ˆæ¯

---

## ğŸ› ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é¢‘é“åç§°

```yaml
pubsub:
  enabled: true
  channels:
    player-join: "my-network:join"
    player-quit: "my-network:quit"
    heartbeat: "my-network:heartbeat"
```

**æ³¨æ„**ï¼šå¦‚æœä¿®æ”¹äº†é¢‘é“åç§°ï¼Œæ‰€æœ‰å­æœçš„é…ç½®ä¹Ÿå¿…é¡»åŒæ­¥ä¿®æ”¹ã€‚

### è°ƒæ•´å¿ƒè·³é—´éš”

```yaml
pubsub:
  heartbeat-interval: 60  # æ”¹ä¸º 60 ç§’
```

å¿ƒè·³é—´éš”è¶ŠçŸ­ï¼Œæ•°æ®è¶Šå®æ—¶ï¼Œä½†ä¼šå¢åŠ  Redis è´Ÿè½½ã€‚

### ç¦ç”¨å¿ƒè·³

å¦‚æœä¸éœ€è¦ç›‘æ§åœ¨çº¿äººæ•°ï¼Œå¯ä»¥ç¦ç”¨å¿ƒè·³ï¼š

```yaml
pubsub:
  heartbeat-interval: 0  # è®¾ä¸º 0 ç¦ç”¨
```

---

## ğŸ“š å¼€å‘è€…æ¥å£

è™½ç„¶ YRDatabase-Waterdog ä¸»è¦ç”¨äºè‡ªåŠ¨é€šä¿¡ï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ WaterdogPE æ’ä»¶ä¸­è®¿é—®å®ƒï¼š

```java
public class MyPlugin extends Plugin {

    private YRDatabaseWaterdog yrDatabase;

    @Override
    public void onEnable() {
        yrDatabase = (YRDatabaseWaterdog) getProxy().getPluginManager().getPlugin("YRDatabase-Waterdog");

        if (yrDatabase == null) {
            getLogger().error("YRDatabase-Waterdog æœªå®‰è£…ï¼");
            return;
        }

        // è·å–å½“å‰åœ¨çº¿ç©å®¶æ•°
        int onlineCount = yrDatabase.getOnlinePlayerCount();

        // æ‰‹åŠ¨å‘é€è‡ªå®šä¹‰æ¶ˆæ¯
        yrDatabase.publishMessage("my-custom-channel", "{\"data\":\"hello\"}");
    }
}
```

---

## ğŸ“Š æ¶æ„è®¾è®¡

### æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WaterdogPE                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         YRDatabase-Waterdog Plugin                    â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  PlayerJoinEvent â†’ å‘é€ REAL_JOIN åˆ° Redis          â”‚  â”‚
â”‚  â”‚  PlayerQuitEvent â†’ å‘é€ REAL_QUIT åˆ° Redis          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    Redis Pub/Sub
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Nukkitå­æœ1  â”‚ â”‚ Nukkitå­æœ2 â”‚ â”‚ Nukkitå­æœ3 â”‚
â”‚               â”‚ â”‚             â”‚ â”‚             â”‚
â”‚  YRDatabase   â”‚ â”‚ YRDatabase  â”‚ â”‚ YRDatabase  â”‚
â”‚  â†“            â”‚ â”‚ â†“           â”‚ â”‚ â†“           â”‚
â”‚  è®¢é˜…æ¶ˆæ¯     â”‚ â”‚ è®¢é˜…æ¶ˆæ¯    â”‚ â”‚ è®¢é˜…æ¶ˆæ¯    â”‚
â”‚  è§¦å‘äº‹ä»¶     â”‚ â”‚ è§¦å‘äº‹ä»¶    â”‚ â”‚ è§¦å‘äº‹ä»¶    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“œ å¼€æºåè®®

æœ¬æ’ä»¶ä½¿ç”¨ **MIT License** å¼€æºåè®®ã€‚

---

## ğŸ’– æ”¯æŒä½œè€…

å¦‚æœè¿™ä¸ªæ’ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ï¼š
- â­ åœ¨ GitHub ä¸Šç»™é¡¹ç›®ç‚¹ä¸ª Star
- ğŸ“¢ åˆ†äº«ç»™å…¶ä»–æœä¸»
- ğŸ› æäº¤ Bug å’Œå»ºè®®

---

**æ’ä»¶ç‰ˆæœ¬**ï¼šv1.0.3
**æ”¯æŒçš„ WaterdogPE ç‰ˆæœ¬**ï¼š2.0.0+
**æœ€åæ›´æ–°**ï¼š2026-01-14
**GitHub**ï¼šhttps://github.com/MufHead/YRDatabase
