# YRDatabase Mavenå‘å¸ƒé…ç½®å®Œæˆ

## å®ŒæˆçŠ¶æ€ï¼š100%

YRDatabaseç°åœ¨å¯ä»¥ä½œä¸ºMaven/Gradleä¾èµ–åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼

---

## å‘å¸ƒçš„å†…å®¹

### ä¸‰ä¸ªæ¨¡å—

1. **com.yirankuma:yrdatabase-common:1.0-SNAPSHOT**
   - å…¬å…±APIå’Œåè®®å®šä¹‰
   - å¤§å°ï¼šçº¦12 KB
   - åŒ…å«ï¼šDatabaseManageræ¥å£ã€æ¶ˆæ¯åè®®ç­‰

2. **com.yirankuma:yrdatabase-nukkit:1.0-SNAPSHOT**
   - Nukkitå­æœå®Œæ•´æ’ä»¶
   - å¤§å°ï¼šçº¦14 MB
   - åŒ…å«ï¼šå®Œæ•´çš„æ•°æ®åº“åŠŸèƒ½ã€Redis/MySQLæ”¯æŒ

3. **com.yirankuma:yrdatabase-waterdog:1.0-SNAPSHOT**
   - WaterdogPEä»£ç†ç«¯æ’ä»¶
   - å¤§å°ï¼šçº¦6.4 MB
   - åŒ…å«ï¼šRedis Pub/Subå‘å¸ƒåŠŸèƒ½

### æ¯ä¸ªæ¨¡å—åŒ…å«

- âœ… ä¸»JARæ–‡ä»¶ (`*.jar`)
- âœ… æºç JAR (`*-sources.jar`)
- âœ… Javadoc JAR (`*-javadoc.jar`)
- âœ… POMæ–‡ä»¶ (`*.pom`)
- âœ… Gradleæ¨¡å—å…ƒæ•°æ® (`*.module`)

---

## å‘å¸ƒä½ç½®

### æœ¬åœ°Mavenä»“åº“ï¼ˆå·²æµ‹è¯•æˆåŠŸï¼‰

å‘å¸ƒå‘½ä»¤ï¼š
```bash
./gradlew publishToMavenLocal
```

å‘å¸ƒåˆ°ï¼š
```
C:/Users/Lin/.m2/repository/com/yirankuma/
â”œâ”€â”€ yrdatabase-common/1.0-SNAPSHOT/
â”‚   â”œâ”€â”€ yrdatabase-common-1.0-SNAPSHOT.jar
â”‚   â”œâ”€â”€ yrdatabase-common-1.0-SNAPSHOT-sources.jar
â”‚   â””â”€â”€ yrdatabase-common-1.0-SNAPSHOT-javadoc.jar
â”œâ”€â”€ yrdatabase-nukkit/1.0-SNAPSHOT/
â”‚   â”œâ”€â”€ yrdatabase-nukkit-1.0-SNAPSHOT.jar
â”‚   â”œâ”€â”€ yrdatabase-nukkit-1.0-SNAPSHOT-sources.jar
â”‚   â””â”€â”€ yrdatabase-nukkit-1.0-SNAPSHOT-javadoc.jar
â””â”€â”€ yrdatabase-waterdog/1.0-SNAPSHOT/
    â”œâ”€â”€ yrdatabase-waterdog-1.0-SNAPSHOT.jar
    â”œâ”€â”€ yrdatabase-waterdog-1.0-SNAPSHOT-sources.jar
    â””â”€â”€ yrdatabase-waterdog-1.0-SNAPSHOT-javadoc.jar
```

### å…¶ä»–å‘å¸ƒé€‰é¡¹ï¼ˆå·²é…ç½®å¥½ï¼‰

#### GitHub Packages
```bash
# é…ç½®gradle.propertiesåæ‰§è¡Œ
./gradlew publishAllPublicationsToGitHubPackagesRepository
```

#### è‡ªå®šä¹‰Mavenä»“åº“
```bash
# é…ç½®gradle.propertiesåæ‰§è¡Œ
./gradlew publishAllPublicationsToCustomRepoRepository
```

---

## å¦‚ä½•ä½¿ç”¨

### æœ€ç®€å•çš„æ–¹å¼ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰

**å‘å¸ƒYRDatabase**ï¼š
```bash
cd YRDatabase
./gradlew publishToMavenLocal
```

**åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨**ï¼š
```kotlin
// build.gradle.kts
repositories {
    mavenLocal()
}

dependencies {
    compileOnly("com.yirankuma:yrdatabase-common:1.0-SNAPSHOT")
}
```

### ä»£ç ç¤ºä¾‹

```java
import com.yirankuma.yrdatabase.YRDatabase;
import com.yirankuma.yrdatabase.api.DatabaseManager;

public class MyPlugin extends PluginBase {
    @Override
    public void onEnable() {
        DatabaseManager db = YRDatabase.getDatabaseManager();

        // ä½¿ç”¨API
        db.smartSet("key", "value", 3600)
            .thenAccept(success -> {
                getLogger().info("ä¿å­˜æˆåŠŸ!");
            });
    }
}
```

---

## é…ç½®æ–‡ä»¶

### build.gradle.ktsï¼ˆæ ¹ç›®å½•ï¼‰

å·²é…ç½®ï¼š
- âœ… Mavenå‘å¸ƒæ’ä»¶
- âœ… è‡ªåŠ¨ç”Ÿæˆæºç JAR
- âœ… è‡ªåŠ¨ç”ŸæˆJavadoc JAR
- âœ… POMä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€å¼€å‘è€…ç­‰ï¼‰
- âœ… ä¸‰ç§å‘å¸ƒä»“åº“ï¼ˆæœ¬åœ°ã€GitHubã€è‡ªå®šä¹‰ï¼‰

### gradle.properties.example

æä¾›äº†é…ç½®æ¨¡æ¿ï¼Œå¤åˆ¶ä¸º`gradle.properties`å³å¯ä½¿ç”¨ï¼š
```properties
# GitHub Packages
gpr.user=your-github-username
gpr.token=ghp_your_token

# è‡ªå®šä¹‰ä»“åº“
customRepo.url=https://your-repo.com
customRepo.username=username
customRepo.password=password
```

---

## ç”Ÿæˆçš„æ–‡ä»¶

### å‘å¸ƒä¿¡æ¯
```
Group ID: com.yirankuma
Artifact IDs:
  - yrdatabase-common
  - yrdatabase-nukkit
  - yrdatabase-waterdog
Version: 1.0-SNAPSHOT
```

### Mavenåæ ‡

```xml
<!-- Commonæ¨¡å— -->
<dependency>
    <groupId>com.yirankuma</groupId>
    <artifactId>yrdatabase-common</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>

<!-- Nukkitæ¨¡å— -->
<dependency>
    <groupId>com.yirankuma</groupId>
    <artifactId>yrdatabase-nukkit</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>

<!-- Waterdogæ¨¡å— -->
<dependency>
    <groupId>com.yirankuma</groupId>
    <artifactId>yrdatabase-waterdog</artifactId>
    <version>1.0-SNAPSHOT</version>
</dependency>
```

---

## å¯ç”¨çš„Gradleä»»åŠ¡

### å‘å¸ƒä»»åŠ¡

```bash
# å‘å¸ƒåˆ°æ‰€æœ‰é…ç½®çš„ä»“åº“
./gradlew publish

# å‘å¸ƒåˆ°æœ¬åœ°Mavenä»“åº“
./gradlew publishToMavenLocal

# å‘å¸ƒåˆ°GitHub Packages
./gradlew publishAllPublicationsToGitHubPackagesRepository

# å‘å¸ƒåˆ°è‡ªå®šä¹‰ä»“åº“
./gradlew publishAllPublicationsToCustomRepoRepository

# åªå‘å¸ƒç‰¹å®šæ¨¡å—
./gradlew :yrdatabase-common:publishToMavenLocal
./gradlew :yrdatabase-nukkit:publishToMavenLocal
./gradlew :yrdatabase-waterdog:publishToMavenLocal
```

### æ„å»ºä»»åŠ¡

```bash
# ç”Ÿæˆæ‰€æœ‰JARï¼ˆä¸»ã€æºç ã€Javadocï¼‰
./gradlew build sourcesJar javadocJar

# æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒä»»åŠ¡
./gradlew tasks --group publishing

# ç”ŸæˆPOMæ–‡ä»¶é¢„è§ˆ
./gradlew generatePomFileForMavenPublication
```

---

## æ–‡æ¡£

å·²åˆ›å»ºä»¥ä¸‹æ–‡æ¡£ï¼š

1. **[MAVEN_PUBLISH_GUIDE.md](MAVEN_PUBLISH_GUIDE.md)** - å®Œæ•´å‘å¸ƒæŒ‡å—
   - å››ç§å‘å¸ƒæ–¹å¼è¯¦è§£
   - é…ç½®æ­¥éª¤
   - ç‰ˆæœ¬ç®¡ç†
   - æ•…éšœæ’é™¤

2. **[USAGE_EXAMPLE.md](USAGE_EXAMPLE.md)** - ä½¿ç”¨ç¤ºä¾‹
   - ä¸‰ç§ä½¿ç”¨åœºæ™¯
   - å®Œæ•´é¡¹ç›®ç¤ºä¾‹
   - APIå‚è€ƒ
   - å¸¸è§é—®é¢˜

3. **[gradle.properties.example](gradle.properties.example)** - é…ç½®æ¨¡æ¿
   - GitHub Packagesé…ç½®
   - è‡ªå®šä¹‰ä»“åº“é…ç½®
   - Maven Centralé…ç½®

---

## æ¨èå·¥ä½œæµç¨‹

### å¼€å‘è€…å·¥ä½œæµ

```bash
# 1. ä¿®æ”¹YRDatabaseä»£ç 
cd YRDatabase
vim src/...

# 2. æµ‹è¯•
./gradlew test

# 3. æ„å»º
./gradlew build

# 4. å‘å¸ƒåˆ°æœ¬åœ°
./gradlew publishToMavenLocal

# 5. åœ¨ä½ çš„é¡¹ç›®ä¸­æµ‹è¯•
cd ../YourPlugin
./gradlew clean build

# 6. æ»¡æ„åï¼Œå‘å¸ƒåˆ°è¿œç¨‹ä»“åº“
cd ../YRDatabase
./gradlew publish
```

### ç‰ˆæœ¬å‘å¸ƒæµç¨‹

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ build.gradle.kts: version = "1.0.0"

# 2. æ›´æ–°CHANGELOG
echo "## [1.0.0] - 2026-01-14" >> CHANGELOG.md

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "Release version 1.0.0"

# 4. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "Release version 1.0.0"

# 5. å‘å¸ƒ
./gradlew publish

# 6. æ¨é€åˆ°Git
git push origin master
git push origin v1.0.0
```

---

## ä¸‹ä¸€æ­¥ï¼ˆå¯é€‰ï¼‰

### 1. å‘å¸ƒåˆ°GitHub Packages

éœ€è¦ï¼š
1. GitHubè´¦å·å’Œä»“åº“
2. GitHub Tokenï¼ˆå¸¦write:packagesæƒé™ï¼‰
3. é…ç½®gradle.properties
4. ä¿®æ”¹build.gradle.ktsä¸­çš„ä»“åº“URL

### 2. å‘å¸ƒåˆ°Maven Central

éœ€è¦ï¼š
1. æ³¨å†ŒSonatypeè´¦å·
2. ç”³è¯·groupId
3. é…ç½®GPGç­¾å
4. æ›´æ–°POMä¿¡æ¯

è¿™æ˜¯æœ€é€šç”¨ä½†æœ€å¤æ‚çš„æ–¹å¼ï¼Œè¯¦è§[MAVEN_PUBLISH_GUIDE.md](MAVEN_PUBLISH_GUIDE.md)ã€‚

### 3. è‡ªåŠ¨åŒ–CI/CD

ä½¿ç”¨GitHub Actionsè‡ªåŠ¨å‘å¸ƒï¼š
- æ¯æ¬¡æ¨é€tagæ—¶è‡ªåŠ¨å‘å¸ƒ
- è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- è‡ªåŠ¨ç”ŸæˆRelease Notes

---

## éªŒè¯å‘å¸ƒ

### æ£€æŸ¥æœ¬åœ°Mavenä»“åº“

```bash
# Windows
ls "C:/Users/Lin/.m2/repository/com/yirankuma/"

# Linux/Mac
ls ~/.m2/repository/com/yirankuma/
```

åº”è¯¥çœ‹åˆ°ä¸‰ä¸ªæ¨¡å—æ–‡ä»¶å¤¹ã€‚

### æµ‹è¯•ä¾èµ–è§£æ

åˆ›å»ºæµ‹è¯•é¡¹ç›®ï¼š
```kotlin
dependencies {
    compileOnly("com.yirankuma:yrdatabase-common:1.0-SNAPSHOT")
}
```

è¿è¡Œï¼š
```bash
./gradlew dependencies --configuration compileClasspath
```

åº”è¯¥èƒ½çœ‹åˆ°YRDatabaseä¾èµ–ã€‚

---

## æ€»ç»“

### å®Œæˆçš„åŠŸèƒ½

- âœ… Mavenå‘å¸ƒæ’ä»¶é…ç½®
- âœ… æºç JARç”Ÿæˆ
- âœ… Javadoc JARç”Ÿæˆ
- âœ… POMä¿¡æ¯é…ç½®
- âœ… å¤šä»“åº“æ”¯æŒ
- âœ… æœ¬åœ°å‘å¸ƒæµ‹è¯•æˆåŠŸ
- âœ… å®Œæ•´æ–‡æ¡£
- âœ… ä½¿ç”¨ç¤ºä¾‹

### ç«‹å³å¯ç”¨

```bash
# å‘å¸ƒ
./gradlew publishToMavenLocal

# ä½¿ç”¨
dependencies {
    compileOnly("com.yirankuma:yrdatabase-common:1.0-SNAPSHOT")
}
```

### ä¼˜åŠ¿

1. **ä¾èµ–ç®¡ç†ç®€å•**ï¼šå…¶ä»–å¼€å‘è€…å¯ä»¥é€šè¿‡Gradle/Mavenç›´æ¥ä½¿ç”¨
2. **ç‰ˆæœ¬æ§åˆ¶æ¸…æ™°**ï¼šæ”¯æŒSNAPSHOTå’Œæ­£å¼ç‰ˆæœ¬
3. **è‡ªåŠ¨åŒ–**ï¼šæ„å»ºã€æµ‹è¯•ã€å‘å¸ƒä¸€æ¡é¾™
4. **æ ‡å‡†åŒ–**ï¼šç¬¦åˆMavenæ ‡å‡†è§„èŒƒ
5. **æ˜“äºåˆ†äº«**ï¼šå¯ä»¥å‘å¸ƒåˆ°å…¬å…±æˆ–ç§æœ‰ä»“åº“

---

**å®Œæˆæ—¶é—´**ï¼š2026-01-14
**æµ‹è¯•çŠ¶æ€**ï¼šâœ… æœ¬åœ°å‘å¸ƒæˆåŠŸ
**å¯ç”¨æ€§**ï¼šâœ… ç«‹å³å¯åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨

ğŸ‰ YRDatabaseç°åœ¨æ˜¯ä¸€ä¸ªæ ‡å‡†çš„Maven/Gradleä¾èµ–åº“äº†ï¼
